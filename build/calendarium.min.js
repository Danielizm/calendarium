/*!
 * calendarium - v0.0.3 - 14.02.2018
 * https://github.com/birdspider/calendarium
 * Copyright (c) 2018 Patrik Plihal, 
 * Licensed under the MIT license
 */


(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function (global){
"use strict";var $=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),calendarium=function(e,t){var n=this;this.element=e,$(e).empty();var a=$(e).data(),i=this._prepEventData(a);this.options=$.extend({},this.defaults,a,{event:i},t),this.options.event.start=new Date(this.options.event.start),this.options.event.stop=new Date(this.options.event.stop);var r="";switch(this.options.event.link){case"canonical":r=$('head > link[href][rel="canonical"]').attr("href")||global.location;break;case"actual":r=global.location;break;default:r=this.options.event.link||""}$.extend(this.options.event,{link:r,description:$.trim(this.options.event.description+"\n\n "+r)});var o=[require("./services/googlecalendar"),require("./services/yahoocalendar"),require("./services/outlookonline")].concat(this._prepGenericCallbacks(this.options.genericCallbacks));this.services=$.map(this.options.services,function(e){var t;return o.forEach(function(a){if((a=a(n)).name===e)return t=a,null}),t}),this._setup()};calendarium.prototype={defaults:{theme:"plain",backendUrl:null,lang:"de",langFallback:"en",services:["googlecalendar","yahoocalendar","outlookonline"],genericCallbacks:[],linktext:{de:"Im Kalender speichern",en:"save to calendar"},event:{start:new Date,stop:new Date,title:"title",description:"",location:"",mode:"time",link:""}},$element:function(){return $(this.element)},getLocalized:function(e,t){return"object"==typeof e[t]?void 0===e[t][this.options.lang]?e[t][this.options.langFallback]:e[t][this.options.lang]:"string"==typeof e[t]?e[t]:void 0},_getEventData:function(){return this.options.event},_setup:function(){var e=this,t="calendarium-theme-"+this.options.theme,n=this.$element().addClass(t),a=$('<a href="javascript:void(0);" rel="nofollow">').addClass("calendarium-link").attr("tabindex",999).text(e.getLocalized(this.options,"linktext")),i=$("<ul>").addClass("calendarium-list");this.services.forEach(function(t){var n=$("<li>").addClass("calendarium-item").addClass(t.name),a=$("<span>").addClass("calendarium-text").text(e.getLocalized(t,"text")),r=$("<a>").addClass("calendarium-item-link").attr("rel","nofollow").attr("href",t.link).attr("target","_blank").attr("title",e.getLocalized(t,"title")).attr("role","button").attr("aria-label",e.getLocalized(t,"title")).append(a);n.append(r),i.append(n)}),n.append(a).append(i)},_obj2param:$.param,_prepEventData:function(e){return $.extend({},{start:e.eventStart,stop:e.eventStop,title:e.eventTitle||"",description:e.eventDescription||"",location:e.eventLocation||"",mode:e.eventMode||"",link:e.eventLink||""},e.event&&("{"===e.event[0]&&JSON.parse(e.event)||e.event)||{})},_prepGenericCallbacks:function(e){return e&&e.length?("string"==typeof e?e.split(",").map($.trim):e).map(function(e){return require("./services/generic")(global[e])}):[]}},module.exports=calendarium,global.calendarium=calendarium,$(".calendarium").filter("[data-event],[data-event-start]").each(function(){this.hasOwnProperty("calendarium")||(this.calendarium=new calendarium(this))});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./services/generic":2,"./services/googlecalendar":3,"./services/outlookonline":4,"./services/yahoocalendar":5}],2:[function(require,module,exports){
"use strict";module.exports=function(t){return function(n){return t(n)}};

},{}],3:[function(require,module,exports){
"use strict";module.exports=function(e){var t=function(e){return e.toISOString().replace(/\.\d+Z$/,"Z").replace(/[-:]/g,"")},n=function(e){return e.toISOString().split("T")[0].replace(/[-:]/g,"")};return{name:"googlecalendar",title:{de:"Bei Google Kalender eintragen",en:"Add to Google Calendar"},text:{de:"Google Kalender",en:"Google Calendar"},link:function(o){var a=[o.start,o.stop],r=t;if(o.mode&&"day"===o.mode){r=n;var i=new Date(o.stop);i.setTime(i.getTime()+864e5),a=[o.start,i]}return"https://www.google.com/calendar/render?"+e._obj2param({action:"TEMPLATE",dates:a.map(r).join("/"),location:o.location,text:o.title,details:o.description})}(e._getEventData())}};

},{}],4:[function(require,module,exports){
"use strict";module.exports=function(e){var t,o=function(e){return e.toISOString().replace(/\.\d+Z$/,"Z").replace(/[-:]/g,"")};return{name:"outlookonline",title:{de:"Bei Outlook Online Kalender eintragen",en:"Add to Outlook Online Calendar"},text:{de:"Outlook Online Kalender",en:"Outlook Online Calendar"},link:(t=e._getEventData(),"https://outlook.live.com/owa/?"+e._obj2param({path:"/calendar/action/compose",startdt:o(t.start),enddt:o(t.stop),location:t.location,subject:t.title,body:t.description,allday:t.mode&&"day"===t.mode}))}};

},{}],5:[function(require,module,exports){
"use strict";module.exports=function(e){var t,a=function(e){return e.toISOString().replace(/\.\d+Z$/,"Z").replace(/[-:]/g,"")};return{name:"yahoocalendar",title:{de:"Bei Yahoo Kalender eintragen",en:"Add to Yahoo Calendar"},text:{de:"Yahoo Kalender",en:"Yahoo Calendar"},link:(t=e._getEventData(),"https://calendar.yahoo.com/?"+e._obj2param({st:a(t.start),et:a(t.stop),in_loc:t.location,title:t.title,desc:t.description,view:"d",v:60,type:20,allday:t.mode&&"day"===t.mode}))}};

},{}]},{},[1]);
